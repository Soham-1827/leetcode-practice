Given an integer array nums, return the maximum possible sum of elements of the array such that it is divisible by three.

 

Example 1:

Input: nums = [3,6,5,1,8]
Output: 18
Explanation: Pick numbers 3, 6, 1 and 8 their sum is 18 (maximum sum divisible by 3).
Example 2:

Input: nums = [4]
Output: 0
Explanation: Since 4 is not divisible by 3, do not pick any number.
Example 3:

Input: nums = [1,2,3,4,4]
Output: 12
Explanation: Pick numbers 1, 3, 4 and 4 their sum is 12 (maximum sum divisible by 3).
class Solution {
public:
    int maxSumDivThree(vector<int>& nums) {
        if (nums.empty()) return 0;

        int sum = 0;
        for (int num : nums) {
            sum += num;
        }

        if (sum % 3 == 0) return sum;

        // Sort so we can easily get the smallest numbers per remainder
        sort(nums.begin(), nums.end());

        vector<int> rem1;  // smallest numbers with num % 3 == 1
        vector<int> rem2;  // smallest numbers with num % 3 == 2

        for (int num : nums) {
            if (num % 3 == 1 && rem1.size() < 2) {
                rem1.push_back(num);
            } else if (num % 3 == 2 && rem2.size() < 2) {
                rem2.push_back(num);
            }
        }

        int result = 0;
        int mod = sum % 3;

        if (mod == 1) {
            int option1 = rem1.size() >= 1 ? sum - rem1[0] : 0;                       // remove one remainder 1
            int option2 = rem2.size() >= 2 ? sum - rem2[0] - rem2[1] : 0;             // remove two remainder 2
            result = max(option1, option2);
        } else { // mod == 2
            int option1 = rem2.size() >= 1 ? sum - rem2[0] : 0;                       // remove one remainder 2
            int option2 = rem1.size() >= 2 ? sum - rem1[0] - rem1[1] : 0;             // remove two remainder 1
            result = max(option1, option2);
        }

        return result;
    }
};
